<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>继电保护设备管理系统-主页</title>

    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"> </script>
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <link rel="stylesheet" href="../CSS/home.css">


</head>

<body>
    <div id="app">
        <el-container>
            <el-header style="text-align: right; font-size: 12px;background: rgb(99, 94, 94);">
                <table style="margin-top: 10px;" id="headTable">
                    <tr>
                        <td>
                            继电保护设备管理系统
                        </td>
                        <td width="900px">
                        </td>
                        <td>

                            <i class="el-icon-user" style="margin-top: 10px;"></i>
                            <el-dropdown>
                                <span class="el-dropdown-link">
                                    <span>{{userInfo.username}}</span><i class="el-icon-arrow-down el-icon--right"></i>
                                </span>
                                <el-dropdown-menu slot="dropdown" id="userDropdawn">
                                    <el-dropdown-item disabled>姓名：{{userInfo.name}}</el-dropdown-item>
                                    <el-dropdown-item disabled>权限：{{userInfo.role}}</el-dropdown-item>
                                    <el-dropdown-item><a href="#">修改密码</a></el-dropdown-item>
                                    <el-dropdown-item><a href="#">修改手机号</a></el-dropdown-item>
                                    <el-dropdown-item divided><a @click="logout">退出账号</a></el-dropdown-item>
                                </el-dropdown-menu>
                            </el-dropdown>


                        </td>
                    </tr>
                </table>

            </el-header>


            <el-container style="height: 1000px; border: 1px solid #eee">

                <el-aside style="width: 200px;">
                    <el-menu>
                        <el-menu-item @click="doUserManage">
                            <p>用户管理</p>
                        </el-menu-item>

                        <el-menu-item @click="doPermissionManage">
                            <p>权限管理</p>
                        </el-menu-item>

                        <el-menu-item @click="doExamManage">
                            <p>设备审批</p>
                        </el-menu-item>

                        <el-menu-item @click="doDeviceManage">
                            <p>设备管理</p>
                        </el-menu-item>

                        <el-menu-item @click="doFaultManage">
                            <p>设备故障</p>
                        </el-menu-item>

                        <el-menu-item @click="doDeadlineManage">
                            <p>临近到期设备</p>
                        </el-menu-item>
                    </el-menu>
                </el-aside>

                <el-main v-if="userManage">
                    <table id="search">
                        <tr>
                            <td>
                                <el-input placeholder="工号" v-model="userSearchInfo.jobId"></el-input>
                            </td>
                            <td>
                                <el-input placeholder="姓名" v-model="userSearchInfo.name"></el-input>
                            </td>
                            <td>
                                <el-input placeholder="用户名" v-model="userSearchInfo.username"></el-input>
                            </td>
                            <td>
                                <el-button type="primary" icon="el-icon-search" @click.native="searchUser"
                                    style="color: white;">搜索
                                </el-button>
                            </td>
                        </tr>
                    </table>

                    <template id="resultTable">
                        <el-table :data="userData" style="width: 100%;" key="userManage">
                            <el-table-column prop="jobId" label="工号" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.jobId" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.jobId}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="name" label="姓名" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.name" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.name}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="username" label="用户名" align="center">
                                <template slot-scope="{row}">
                                    <span class="table-cell">{{row.username}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="permission" label="权限" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.permission" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.permission}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="phoneNum" label="手机号" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.phoneNum" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.phoneNum}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="loginTime" label="上次登录时间" align="center">
                                <template slot-scope="{row}">
                                    <el-date-picker value-format="yyyy-MM-dd" type="datetime" v-if="row.edit"
                                        v-model="row.loginTime" type="date" placeholder='请输入时间' style="width: 140px;">
                                    </el-date-picker>
                                    <span class="table-cell" v-if="!row.edit">{{row.loginTime}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column align="center" label="操作">
                                <div slot-scope="scope">
                                    <!-- 删除 -->
                                    <div v-if="!scope.row.edit">

                                        <el-button @click.native="scope.row.edit = true" type="text" slot="reference"
                                            icon="el-icon-edit" circle></el-button>
                                        <el-popover width="160" v-model="scope.row.visible">
                                            <p style="font-size: 15px;">确定删除吗？</p>
                                            <div style="text-align: right; margin: 0" style="font-size: 15px;">
                                                <el-button size="mini" type="text" @click="scope.row.visible = false">
                                                    <span style="color: #58595b;" class="cancel">取消</span></el-button>
                                                <el-button type="danger" size="mini"
                                                    @click="deleteUser(scope.row,scope.$index)">确定</el-button>
                                            </div>
                                            <el-button type="text" slot="reference" icon="el-icon-delete" circle>
                                            </el-button>
                                        </el-popover>
                                    </div>
                                    <!-- 编辑 -->
                                    <div v-if="scope.row.edit">
                                        <el-button @click.native="updateUser(scope.row)" type="text"
                                            icon="el-icon-finished" circle></el-button>
                                        <el-button @click.native="scope.row.edit = false" type="text"
                                            icon="el-icon-close" circle></el-button>
                                    </div>
                                </div>
                            </el-table-column>

                        </el-table>

                        <div style="display: flex;justify-content: space-around;margin-top: 10px;"
                            v-if="userAddInfoShow">

                            <span style="color: #58595b; margin-top: 10px;">工号：</span>
                            <el-input v-model="userAddInfo.jobId" placeholder="请输入工号" style="width: 180px;"></el-input>
                            <span style="color: #58595b; margin-top: 10px;">姓名：</span>
                            <el-input v-model="userAddInfo.name" placeholder="请输入姓名" align="center"
                                style="width: 180px;"></el-input>
                            <span style="color: #58595b; margin-top: 10px;">权限：</span>
                            <el-input v-model="userAddInfo.permission" placeholder="请输入权限角色" align="center"
                                style="width: 180px;"></el-input>
                            <span style="color: #58595b; margin-top: 10px;">手机号：</span>
                            <el-input v-model="userAddInfo.phoneNum" placeholder="请输入手机号" align="center"
                                style="width: 180px;"></el-input>

                        </div>

                        <div style="display: flex;justify-content: center;">

                            <el-button type="primary" icon="el-icon-finished" size="small" style="margin-top: 10px;"
                                v-if="userAddInfoShow" @click="addUser">提交</el-button>
                            <el-button type="text" icon="el-icon-close" size="small" style="margin-top: 10px;"
                                v-if="userAddInfoShow" @click="addUserClose"><span style="color: #58595b;"
                                    class="cancel">取消</span></el-button>
                            <el-button type="primary" icon="el-icon-plus" size="small" style="margin-top: 10px;"
                                v-if="!userAddInfoShow" @click="userAddInfoShow=true">Add</el-button>

                        </div>
                    </template>
                </el-main>

                <el-main v-if="permissionManage">
                    <div style="display: flex;justify-content: space-between;height: 50px;margin-bottom: 20px;">
                        <p style="margin-top: 10px;">权限信息管理</p>
                        <el-button @click.native="importPermissionInfo" type="primary" icon="el-icon-refresh"
                            id="import">导入</el-button>

                    </div>

                    <template id="resultTable">
                        <el-table :data="permissionData" style="width: 100%;" key="permissionTable">

                            <el-table-column type="expand" label="更多" align="center">
                                <template slot-scope="props">
                                    <el-form label-position="left" inline class="demo-table-expand">
                                        <el-form-item label="权限获取">
                                            <el-select v-model="props.row.permissionGet" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.permissionGet">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.permissionGet">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="权限修改">
                                            <el-select v-model="props.row.permissionPost" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.permissionPost">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.permissionPost">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="权限新增">
                                            <el-select v-model="props.row.permissionAdd" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.permissionAdd">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.permissionAdd">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="权限删除">
                                            <el-select v-model="props.row.permissionDelete" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.permissionDelete">有</span>
                                                <span style="color: #58595b;"
                                                    v-if="!props.row.permissiondelete">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="设备获取">
                                            <el-select v-model="props.row.deviceGet" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.deviceGet">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.deviceGet">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="设备修改">
                                            <el-select v-model="props.row.devicePost" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.devicePost">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.devicePost">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="设备新增">
                                            <el-select v-model="props.row.deviceAdd" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.deviceAdd">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.deviceAdd">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="设备删除">
                                            <el-select v-model="props.row.deviceDelete" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.deviceDelete">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.deviceDelete">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="模板获取">
                                            <el-select v-model="props.row.temGet" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.temGet">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.temGet">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="模板修改">
                                            <el-select v-model="props.row.temPost" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.temPost">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.temPost">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="模板新增">
                                            <el-select v-model="props.row.temAdd" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.temAdd">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.temAdd">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="模板删除">
                                            <el-select v-model="props.row.temDelete" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.temDelete">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.temDelete">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="软件获取">
                                            <el-select v-model="props.row.softGet" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.softGet">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.softGet">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="软件修改">
                                            <el-select v-model="props.row.softPost" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.softPost">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.softPost">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="软件新增">
                                            <el-select v-model="props.row.softAdd" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.softAdd">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.softAdd">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="软件删除">
                                            <el-select v-model="props.row.softDelete" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.softDelete">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.softDelete">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="故障获取">
                                            <el-select v-model="props.row.faultGet" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.faultGet">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.faultGet">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="故障修改">
                                            <el-select v-model="props.row.faultPost" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.faultPost">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.faultPost">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="故障新增">
                                            <el-select v-model="props.row.faultAdd" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.faultAdd">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.faultAdd">无</span>
                                            </span>
                                        </el-form-item>
                                        <el-form-item label="故障删除">
                                            <el-select v-model="props.row.faultDelete" placeholder="选择权限"
                                                v-if="props.row.edit">
                                                <el-option v-for="item in permissionOptions" :key="item.value"
                                                    :label="item.label" :value="item.value">
                                                </el-option>
                                            </el-select>
                                            <span v-if="!props.row.edit">
                                                <span style="color: #58595b;" v-if="props.row.faultDelete">有</span>
                                                <span style="color: #58595b;" v-if="!props.row.faultDelete">无</span>
                                            </span>
                                        </el-form-item>
                                    </el-form>
                                </template>

                            </el-table-column>

                            <el-table-column prop="permission" label="权限角色" align="center">
                                <div slot-scope="scope">
                                    <span style="color: #58595b;">{{scope.row.permission}}</span>
                                </div>
                            </el-table-column>
                            <el-table-column prop="examine" label="审批" align="center">
                                <div slot-scope="scope">
                                    <el-select v-model="scope.row.examine" placeholder="选择权限" v-if="scope.row.edit">
                                        <el-option v-for="item in permissionOptions" :key="item.value"
                                            :label="item.label" :value="item.value">
                                        </el-option>
                                    </el-select>
                                    <span v-if="!scope.row.edit">
                                        <span style="color: #58595b;" v-if="scope.row.examine">有</span>
                                        <span style="color: #58595b;" v-if="!scope.row.examine">无</span>
                                    </span>
                                </div>
                            </el-table-column>
                            <el-table-column prop="userGet" label="用户获取" align="center">
                                <div slot-scope="scope">
                                    <el-select v-model="scope.row.userGet" placeholder="选择权限" v-if="scope.row.edit">
                                        <el-option v-for="item in permissionOptions" :key="item.value"
                                            :label="item.label" :value="item.value">
                                        </el-option>
                                    </el-select>
                                    <span v-if="!scope.row.edit">
                                        <span style="color: #58595b;" v-if="scope.row.userGet">有</span>
                                        <span style="color: #58595b;" v-if="!scope.row.userGet">无</span>
                                    </span>
                                </div>
                            </el-table-column>
                            <el-table-column prop="userPost" label="用户修改" align="center">
                                <div slot-scope="scope">
                                    <el-select v-model="scope.row.userPost" placeholder="选择权限" v-if="scope.row.edit">
                                        <el-option v-for="item in permissionOptions" :key="item.value"
                                            :label="item.label" :value="item.value">
                                        </el-option>
                                    </el-select>
                                    <span v-if="!scope.row.edit">
                                        <span style="color: #58595b;" v-if="scope.row.userPost">有</span>
                                        <span style="color: #58595b;" v-if="!scope.row.userPost">无</span>
                                    </span>
                                </div>

                            </el-table-column>
                            <el-table-column prop="userAdd" label="用户新增" align="center">
                                <div slot-scope="scope">
                                    <el-select v-model="scope.row.userAdd" placeholder="选择权限" v-if="scope.row.edit">
                                        <el-option v-for="item in permissionOptions" :key="item.value"
                                            :label="item.label" :value="item.value">
                                        </el-option>
                                    </el-select>
                                    <span v-if="!scope.row.edit">
                                        <span style="color: #58595b;" v-if="scope.row.userAdd">有</span>
                                        <span style="color: #58595b;" v-if="!scope.row.userAdd">无</span>
                                    </span>
                                </div>

                            </el-table-column>
                            <el-table-column prop="userDelete" label="用户删除" align="center">
                                <div slot-scope="scope">
                                    <el-select v-model="scope.row.userDelete" placeholder="选择权限" v-if="scope.row.edit">
                                        <el-option v-for="item in permissionOptions" :key="item.value"
                                            :label="item.label" :value="item.value">
                                        </el-option>
                                    </el-select>
                                    <span v-if="!scope.row.edit">
                                        <span style="color: #58595b;" v-if="scope.row.userDelete">有</span>
                                        <span style="color: #58595b;" v-if="!scope.row.userDelete">无</span>
                                    </span>
                                </div>
                            </el-table-column>

                            <el-table-column align="center" label="操作">
                                <div slot-scope="scope">
                                    <!-- 删除 -->
                                    <div v-if="!scope.row.edit">
                                        <el-button @click.native="scope.row.edit = true" type="text" slot="reference"
                                            icon="el-icon-edit" circle></el-button>
                                        <el-popover width="160" v-model="scope.row.visible">
                                            <p style="font-size: 15px;">确定删除吗？</p>
                                            <div style="text-align: right; margin: 0" style="font-size: 15px;">
                                                <el-button size="mini" type="text" @click="scope.row.visible = false">
                                                    <span style="color: #58595b;" class="cancel">取消</span></el-button>
                                                <el-button type="danger" size="mini"
                                                    @click="deletePermission(scope.row,scope.$index)">确定</el-button>
                                            </div>
                                            <el-button type="text" slot="reference" icon="el-icon-delete" circle>
                                            </el-button>
                                        </el-popover>
                                    </div>
                                    <!-- 编辑 -->
                                    <div v-if="scope.row.edit">
                                        <el-button @click.native="updatePermission(scope.row)" type="text"
                                            icon="el-icon-finished" circle></el-button>
                                        <el-button @click.native="scope.row.edit = false" type="text"
                                            icon="el-icon-close" circle></el-button>
                                    </div>
                                </div>
                            </el-table-column>


                        </el-table>

                        <div v-if="permissionAddInfoShow">
                            <div style="display: flex;justify-content: center;margin-top: 10px;">
                                <span style="color: #58595b; margin-top: 10px;">权限角色：</span>
                                <el-input v-model="permissionAddData.permission" placeholder="请输入权限角色"
                                    style="width: 180px;"></el-input>
                            </div>
                            <div style="display: flex;margin-top: 10px;">
                                <div style="margin-left: 20px;">
                                    <i class="el-icon-info" style="color: #ce471e;"></i>
                                    <span style="color: #ce471e;">不选默认为无</span>
                                </div>

                            </div>

                            <div style="display: flex;justify-content: space-around;margin-top: 10px; ">
                                <span style="color: #58595b; margin-top: 10px;">用户获取：</span>
                                <el-select v-model="permissionAddData.userGet" placeholder="选择权限" style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">用户修改：</span>
                                <el-select v-model="permissionAddData.userPost" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">用户新增：</span>
                                <el-select v-model="permissionAddData.userAdd" placeholder="选择权限" style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">用户删除：</span>
                                <el-select v-model="permissionAddData.userDelete" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                            </div>
                            <div style="display: flex;justify-content: space-around;margin-top: 10px; ">
                                <span style="color: #58595b; margin-top: 10px;">权限获取：</span>
                                <el-select v-model="permissionAddData.permissionGet" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">权限修改：</span>
                                <el-select v-model="permissionAddData.permissionPost" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">权限新增：</span>
                                <el-select v-model="permissionAddData.permissionAdd" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">用户删除：</span>
                                <el-select v-model="permissionAddData.permissionDelete" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                            </div>
                            <div style="display: flex;justify-content: space-around;margin-top: 10px; ">
                                <span style="color: #58595b; margin-top: 10px;">设备获取：</span>
                                <el-select v-model="permissionAddData.deviceGet" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">设备修改：</span>
                                <el-select v-model="permissionAddData.devicePost" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">设备新增：</span>
                                <el-select v-model="permissionAddData.deviceAdd" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">设备删除：</span>
                                <el-select v-model="permissionAddData.deviceDelete" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                            </div>
                            <div style="display: flex;justify-content: space-around;margin-top: 10px; ">
                                <span style="color: #58595b; margin-top: 10px;">模板获取：</span>
                                <el-select v-model="permissionAddData.temGet" placeholder="选择权限" style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">模板修改：</span>
                                <el-select v-model="permissionAddData.temPost" placeholder="选择权限" style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">模板新增：</span>
                                <el-select v-model="permissionAddData.temAdd" placeholder="选择权限" style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">模板删除：</span>
                                <el-select v-model="permissionAddData.temDelete" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                            </div>
                            <div style="display: flex;justify-content: space-around;margin-top: 10px; ">
                                <span style="color: #58595b; margin-top: 10px;">软件获取：</span>
                                <el-select v-model="permissionAddData.softGet" placeholder="选择权限" style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">软件修改：</span>
                                <el-select v-model="permissionAddData.softPost" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">软件新增：</span>
                                <el-select v-model="permissionAddData.softAdd" placeholder="选择权限" style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">软件删除：</span>
                                <el-select v-model="permissionAddData.softDelete" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                            </div>
                            <div style="display: flex;justify-content: space-around;margin-top: 10px; ">
                                <span style="color: #58595b; margin-top: 10px;">故障获取：</span>
                                <el-select v-model="permissionAddData.faultGet" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">故障修改：</span>
                                <el-select v-model="permissionAddData.faultPost" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">故障新增：</span>
                                <el-select v-model="permissionAddData.faultAdd" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                                <span style="color: #58595b; margin-top: 10px;">故障删除：</span>
                                <el-select v-model="permissionAddData.faultDelete" placeholder="选择权限"
                                    style="width: 120px;">
                                    <el-option v-for="item in permissionOptions" :key="item.value" :label="item.label"
                                        :value="item.value">
                                    </el-option>
                                </el-select>
                            </div>
                        </div>

                        <div style="display: flex;justify-content: center;">

                            <el-button type="primary" icon="el-icon-finished" size="small" style="margin-top: 10px;"
                                v-if="permissionAddInfoShow" @click="addPermission">提交</el-button>
                            <el-button type="text" icon="el-icon-close" size="small" style="margin-top: 10px;"
                                v-if="permissionAddInfoShow" @click="addPermissionClose"><span style="color: #58595b;"
                                    class="cancel">取消</span></el-button>
                            <el-button type="primary" icon="el-icon-plus" size="small" style="margin-top: 10px;"
                                v-if="!permissionAddInfoShow" @click="permissionAddInfoShow=true">Add</el-button>

                        </div>
                    </template>

                </el-main>

                <el-main v-if="examManage">
                    <div style="display: flex;justify-content: space-between;height: 50px;margin-bottom: 20px;">
                        <p style="margin-top: 10px;">设备信息审批</p>
                        <el-button type="primary" icon="el-icon-refresh" id="import">导入</el-button>

                    </div>


                    <template id="resultTable">
                        <el-table :data="deviceExamData" style="width: 100%;" key="deviceExamManage">
                            <el-table-column prop="deviceId" label="设备编号" align="center">
                            </el-table-column>
                            <el-table-column prop="deviceName" label="设备名称" align="center">
                            </el-table-column>
                            <el-table-column prop="RDevtype" label="保护类型" align="center">
                            </el-table-column>
                            <el-table-column prop="proName" label="保护目标" align="center">
                            </el-table-column>
                            <el-table-column prop="switchId" label="开关编号" align="center">
                            </el-table-column>
                            <el-table-column prop="devFac" label="制造厂家" align="center">
                            </el-table-column>
                            <el-table-column prop="deadline" label="使用期限" align="center">
                            </el-table-column>
                            <el-table-column prop="deadline" label="请求操作" align="center">
                            </el-table-column>
                            <el-table-column align="center">
                                <i class="el-icon-edit"></i>
                                <a href="#">修改</a>
                                <i class="el-icon-delete"></i>
                                <a href="#">删除</a>
                            </el-table-column>

                        </el-table>
                    </template>

                    <div
                        style="display: flex;justify-content: space-between;height: 50px;margin-bottom: 20px; margin-top: 20px;">
                        <p style="margin-top: 10px;">故障信息审批</p>
                        <el-button type="primary" icon="el-icon-refresh" id="import">导入</el-button>
                    </div>


                    <template id="resultTable">
                        <el-table :data="faultExamData" style="width: 100%;" key="faultExamManage">
                            <el-table-column prop="deviceId" label="设备编号" align="center">
                            </el-table-column>
                            <el-table-column prop="deviceName" label="设备名称" align="center">
                            </el-table-column>
                            <el-table-column prop="faultDesc" label="故障描述" align="center">
                            </el-table-column>
                            <el-table-column prop="devFac" label="制造厂家" align="center">
                            </el-table-column>
                            <el-table-column prop="upUser" label="上传用户" align="center">
                            </el-table-column>
                            <el-table-column prop="upTime" label="上传时间" align="center">
                            </el-table-column>
                            <el-table-column prop="deadline" label="请求操作" align="center">
                            </el-table-column>
                            <el-table-column width="120" align="center">
                                <i class="el-icon-edit"></i>
                                <a href="#">修改</a>
                                <i class="el-icon-delete"></i>
                                <a href="#">删除</a>
                            </el-table-column>

                        </el-table>
                    </template>

                    <div
                        style="display: flex;justify-content: space-between;height: 50px;margin-bottom: 20px; margin-top: 20px;">
                        <p style="margin-top: 10px;">软件信息审批</p>
                        <el-button type="primary" icon="el-icon-refresh" id="import">导入</el-button>
                    </div>


                    <template id="resultTable">
                        <el-table :data="softExamData" style="width: 100%;" key="softExamManage">
                            <el-table-column prop="softId" label="软件编号" align="center">
                            </el-table-column>
                            <el-table-column prop="softName" label="软件名称" align="center">
                            </el-table-column>
                            <el-table-column prop="softVersion" label="软件版本" align="center">
                            </el-table-column>
                            <el-table-column prop="softFac" label="软件厂家" align="center">
                            </el-table-column>
                            <el-table-column prop="devId" label="设备编号" align="center">
                            </el-table-column>
                            <el-table-column prop="devName" label="设备名称" align="center">
                            </el-table-column>
                            <el-table-column prop="devFac" label="制造厂家" align="center">
                            </el-table-column>
                            <el-table-column prop="deadline" label="请求操作" align="center">
                            </el-table-column>
                            <el-table-column align="center">
                                <i class="el-icon-edit"></i>
                                <a href="#">修改</a>
                                <i class="el-icon-delete"></i>
                                <a href="#">删除</a>
                            </el-table-column>

                        </el-table>
                    </template>

                    <div
                        style="display: flex;justify-content: space-between;height: 50px;margin-bottom: 20px; margin-top: 20px;">
                        <p style="margin-top: 10px;">模板信息审批</p>
                        <el-button type="primary" icon="el-icon-refresh" id="import">导入</el-button>
                    </div>


                    <template id="resultTable">
                        <el-table :data="temExamData" style="width: 100%;" key="temExamManage">
                            <el-table-column prop="Id" label="设备编号" align="center">
                            </el-table-column>
                            <el-table-column prop="deviceName" label="设备名" align="center">
                            </el-table-column>
                            <el-table-column prop="RDevtype" label="保护类型" align="center">
                            </el-table-column>
                            <el-table-column prop="proName" label="保护目标" align="center">
                            </el-table-column>
                            <el-table-column prop="switchId" label="开关编号" align="center">
                            </el-table-column>
                            <el-table-column prop="devFac" label="制造厂家" align="center">
                            </el-table-column>
                            <el-table-column prop="temId" label="模板参数" align="center">
                            </el-table-column>
                            <el-table-column prop="softId" label="软件信息" align="center">
                            </el-table-column>
                            <el-table-column prop="faultId" label="故障" align="center">
                            </el-table-column>
                            <el-table-column prop="deadline" label="使用期限" align="center">
                            </el-table-column>
                            <el-table-column prop="deadline" label="请求操作" align="center">
                            </el-table-column>
                            <el-table-column align="center">
                                <i class="el-icon-edit"></i>
                                <a href="#">修改</a>
                                <i class="el-icon-delete"></i>
                                <a href="#">删除</a>
                            </el-table-column>

                        </el-table>
                    </template>
                </el-main>

                <el-main v-if="deviceManage">
                    <table id="search">
                        <tr>
                            <td>
                                <el-input placeholder="设备ID" v-model="deviceSearchInfo.id"></el-input>
                            </td>
                            <td>
                                <el-input placeholder="设备编号" v-model="deviceSearchInfo.devId"></el-input>
                            </td>
                            <td>
                                <el-input placeholder="设备名" v-model="deviceSearchInfo.devName"></el-input>
                            </td>
                            <td>
                                <el-input placeholder="制造厂家" v-model="deviceSearchInfo.devFac"></el-input>
                            </td>
                            <td>
                                <el-input placeholder="位置描述" v-model="deviceSearchInfo.location"></el-input>
                            </td>
                            <td>
                                <el-button type="primary" icon="el-icon-search" @click.native="searchDevice">搜索
                                </el-button>
                            </td>
                        </tr>
                    </table>

                    <template id="resultTable">
                        <el-table :data="deviceData" style="width: 100%;" key="deviceManage">
                            <el-table-column prop="id" label="设备ID" align="center">
                                <template slot-scope="{row}">
                                    <span class="table-cell">{{row.id}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="devId" label="设备编号" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.devId" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.devId}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="devName" label="设备名" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.devName" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.devName}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="rDevType" label="保护类型" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.rDevType" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.rDevType}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="proName" label="被保护设备" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.proName" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.proName}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="switchId" label="开关编号" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.switchId" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.switchId}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="devFac" label="制造厂家" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.devFac" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.devFac}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column prop="location" label="位置描述" align="center">
                                <template slot-scope="{row}">
                                    <input class="edit-cell" v-model="row.location" v-if="row.edit">
                                    <span class="table-cell" v-if="!row.edit">{{row.location}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column label="模板" align="center">

                                <div slot-scope="scope">
                                    <el-button type="text" @click.native="getTemById(scope.row)">
                                        <span style="color: #58595b;" class="cancel">获取</span>
                                    </el-button>
                                </div>


                            </el-table-column>
                            <el-table-column label="软件" align="center">

                                <div slot-scope="scope">
                                    <el-button type="text" @click="getSoftById(scope.row)" v-if="softInfoNotNull">
                                        <span style="color: #58595b;" class="cancel">获取</span>
                                    </el-button>

                                </div>
                            </el-table-column>
                            <el-table-column label="故障" align="center">
                                <div slot-scope="scope">
                                    <el-button type="text" @click="getFaultById(scope.row)" v-if="faultInfoNotNull">
                                        <span style="color: #58595b;" class="cancel">获取</span>
                                    </el-button>
                                </div>
                            </el-table-column>
                            <el-table-column prop="deadline" label="使用期限" align="center">
                                <template slot-scope="{row}">
                                    <el-date-picker value-format="yyyy-MM-dd" type="datetime" v-if="row.edit"
                                        v-model="row.deadline" placeholder='请输入时间' style="width: 140px;">
                                    </el-date-picker>
                                    <span class="table-cell" v-if="!row.edit">{{row.deadline}}</span>
                                </template>
                            </el-table-column>
                            <el-table-column align="center" width="100px" label="操作">
                                <div slot-scope="scope">
                                    <!-- 删除 -->
                                    <div v-if="!scope.row.edit">
                                        <el-button @click.native="scope.row.edit = true" type="text" slot="reference"
                                            icon="el-icon-edit" circle></el-button>
                                        <el-popover width="160" v-model="scope.row.visible">
                                            <p style="font-size: 15px;">确定删除吗？</p>
                                            <div style="text-align: right; margin: 0" style="font-size: 15px;">
                                                <el-button size="mini" type="text" @click="scope.row.visible = false">
                                                    <span style="color: #58595b;" class="cancel">取消</span></el-button>
                                                <el-button type="danger" size="mini"
                                                    @click="deleteDevice(scope.row,scope.$index)">确定</el-button>
                                            </div>
                                            <el-button type="text" slot="reference" icon="el-icon-delete" circle>
                                            </el-button>
                                        </el-popover>
                                    </div>
                                    <!-- 编辑 -->
                                    <div v-if="scope.row.edit">
                                        <el-button @click.native="updateDevice(scope.row)" type="text"
                                            icon="el-icon-finished" circle></el-button>
                                        <el-button @click.native="scope.row.edit = false" type="text"
                                            icon="el-icon-close" circle></el-button>
                                    </div>
                                </div>
                            </el-table-column>

                        </el-table>
                        <div style="display: flex;justify-content: center;margin-top: 10px;" v-if="deviceAddInfoShow">
                            <span style="color: #58595b; margin-top: 10px;">设备ID：</span>
                            <el-input v-model="deviceAddInfo.id" placeholder="设备ID" style="width: 130px;"></el-input>
                        </div>
                        <div style="display: flex;justify-content: space-between;margin-top: 10px;"
                            v-if="deviceAddInfoShow">
                            <span style="color: #58595b; margin-top: 10px;">设备编号：</span>
                            <el-input v-model="deviceAddInfo.devId" placeholder="设备编号" style="width: 130px;"></el-input>
                            <span style="color: #58595b; margin-top: 10px;">设备名称：</span>
                            <el-input v-model="deviceAddInfo.devName" placeholder="设备名称" style="width: 130px;">
                            </el-input>
                            <span style="color: #58595b; margin-top: 10px;">保护类型：</span>
                            <el-input v-model="deviceAddInfo.RDevtype" placeholder="保护类型" style="width: 130px;">
                            </el-input>
                            <span style="color: #58595b; margin-top: 10px;">被保护设备：</span>
                            <el-input v-model="deviceAddInfo.proName" placeholder="被保护设备" style="width: 130px;">
                            </el-input>
                        </div>
                        <div style="display: flex;justify-content: space-between;margin-top: 10px;"
                            v-if="deviceAddInfoShow">
                            <span style="color: #58595b; margin-top: 10px;">开关编号：</span>
                            <el-input v-model="deviceAddInfo.switchId" placeholder="开关编号" style="width: 130px;">
                            </el-input>
                            <span style="color: #58595b; margin-top: 10px;">制造厂家：</span>
                            <el-input v-model="deviceAddInfo.devFac" placeholder="设备名称" style="width: 130px;">
                            </el-input>
                            <span style="color: #58595b; margin-top: 10px;">位置描述：</span>
                            <el-input v-model="deviceAddInfo.location" placeholder="位置描述" style="width: 130px;">
                            </el-input>
                            <span style="color: #58595b; margin-top: 10px;">使用期限：</span>
                            <el-date-picker value-format="yyyy-MM-dd" type="datetime" style="width: 130px;"
                                v-model="deviceAddInfo.deadline" type="date" placeholder='使用期限'>
                            </el-date-picker>
                        </div>

                        <div style="display: flex;justify-content: center;">

                            <el-button type="primary" icon="el-icon-finished" size="small" style="margin-top: 10px;"
                                v-if="deviceAddInfoShow" @click="addDevice">提交</el-button>
                            <el-button type="text" icon="el-icon-close" size="small" style="margin-top: 10px;"
                                v-if="deviceAddInfoShow" @click="addDeviceClose"><span style="color: #58595b;"
                                    class="cancel">取消</span></el-button>
                            <el-button type="primary" icon="el-icon-plus" size="small" style="margin-top: 10px;"
                                v-if="!deviceAddInfoShow" @click="deviceAddInfoShow=true">Add</el-button>

                        </div>
                    </template>
                </el-main>

                <el-dialog title="软件信息" :visible.sync="softDialogTableVisible" @close="closeSoftDialogTableVisible">
                    <el-form :model="softData">
                        <el-form-item label="软件编号">
                            <el-input v-model="softData.softId" v-if="!softData.add" placeholder="软件编号"
                                style="width: 130px;" key="softIdEdit"></el-input>
                            <el-input v-if="softAddInfoShow" v-model="softAddInfo.softId" placeholder="软件编号"
                                style="width: 130px;" key="softIdAdd"></el-input>

                        </el-form-item>
                        <el-form-item label="软件名称">
                            <el-input v-model="softData.softName" v-if="!softData.add" placeholder="软件名称"
                                style="width: 130px;" key="softNameEdit"></el-input>
                            <el-input v-if="softAddInfoShow" v-model="softAddInfo.softName" placeholder="软件名称"
                                style="width: 130px;" key="softNameAdd"></el-input>

                        </el-form-item>
                        <el-form-item label="软件厂家">
                            <el-input v-model="softData.softFac" v-if="!softData.add" placeholder="软件厂家"
                                style="width: 130px;" key="softFacEdit"></el-input>
                            <el-input v-if="softAddInfoShow" v-model="softAddInfo.softFac" placeholder="软件厂家"
                                style="width: 130px;" key="softFacAdd"></el-input>

                        </el-form-item>
                        <el-form-item label="软件版本号">
                            <el-input v-model="softData.softVer" v-if="!softData.add" placeholder="软件版本号"
                                style="width: 130px;" key="softVerEdit"></el-input>
                            <el-input v-if="softAddInfoShow" v-model="softAddInfo.softVer" placeholder="软件版本号"
                                style="width: 130px;" key="softVerAdd"></el-input>

                        </el-form-item>
                    </el-form>
                    <!-- 新增 -->
                    <div style="display: flex;justify-content: center;">

                        <el-button type="primary" icon="el-icon-finished" size="small" style="margin-top: 10px;"
                            v-if="softAddInfoShow" @click="addSoft">提交</el-button>
                        <el-button type="text" icon="el-icon-close" size="small" style="margin-top: 10px;"
                            v-if="softAddInfoShow" @click="closeSoftAdd"><span style="color: #58595b;"
                                class="cancel">取消</span></el-button>
                        <div v-if="softData.add">
                            <el-button type="primary" icon="el-icon-plus" size="small" style="margin-top: 10px;"
                                v-if="!softAddInfoShow" @click="softAddInfoShow=true">Add</el-button>
                        </div>
                    </div>

                    <div>
                        <!-- 删除和修改 -->
                        <div v-if="!softData.add">
                            <el-button @click.native="updateSoft" type="text" icon="el-icon-finished" circle>
                            </el-button>
                            <el-popover width="160" v-model="softData.visible" v-if="!softData.edit">
                                <p style="font-size: 15px;">确定删除吗？</p>
                                <div style="text-align: right; margin: 0" style="font-size: 15px;">
                                    <el-button size="mini" type="text" @click.native="softData.visible = false">
                                        <span style="color: #58595b;" class="cancel">取消</span></el-button>
                                    <el-button type="danger" size="mini" @click="deleteSoft">
                                        确定</el-button>
                                </div>
                                <el-button type="text" slot="reference" icon="el-icon-delete" circle>
                                </el-button>
                            </el-popover>
                        </div>
                        <!-- 编辑 -->



                    </div>

                </el-dialog>
                <el-dialog title="故障信息" :visible.sync="faultDialogTableVisible" @close="closeFaultDialogTableVisible">
                    <el-form :model="faultData" v-if="!faultData.add">
                        <el-form-item label="故障描述">
                            <el-input v-model="faultData.faultDesc" autosizetype="textarea" maxlength="200"
                                show-word-limit placeholder="故障描述" style="width: 600px;"></el-input>
                        </el-form-item>
                        <el-form-item label="上传时间" style="margin-top: 10px;">
                            <span class="table-cell">{{faultData.upTime}}</span>
                        </el-form-item>
                        <el-form-item label="上传用户" style="margin-top: 10px;">
                            <span class="table-cell">{{faultData.name}}</span>
                        </el-form-item>
                        <el-form-item label="上传用户联系方式" style="margin-top: 10px;">
                            <span class="table-cell">{{faultData.phoneNum}}</span>
                        </el-form-item>

                    </el-form>

                    <el-input v-if="faultAddInfoShow" v-model="faultAddInfo.faultDesc" autosize type="textarea"
                        maxlength="200" show-word-limit placeholder="故障描述" style="width: 600px;"></el-input>

                    <!-- 新增 -->
                    <div style="display: flex;justify-content: center;">

                        <el-button type="primary" icon="el-icon-finished" size="small" style="margin-top: 10px;"
                            v-if="faultAddInfoShow" @click="addFault">提交</el-button>
                        <el-button type="text" icon="el-icon-close" size="small" style="margin-top: 10px;"
                            v-if="faultAddInfoShow" @click="closeFaultAdd"><span style="color: #58595b;"
                                class="cancel">取消</span></el-button>
                        <div v-if="faultData.add">
                            <el-button type="primary" icon="el-icon-plus" size="small" style="margin-top: 10px;"
                                v-if="!faultAddInfoShow" @click="faultAddInfoShow=true">Add</el-button>
                        </div>
                    </div>

                    <div>
                        <!-- 删除和修改 -->
                        <div v-if="!faultData.add">
                            <el-button @click.native="updateFault" type="text" icon="el-icon-finished" circle>
                            </el-button>
                            <el-popover width="160" v-model="faultData.visible" v-if="!faultData.edit">
                                <p style="font-size: 15px;">确定删除吗？</p>
                                <div style="text-align: right; margin: 0" style="font-size: 15px;">
                                    <el-button size="mini" type="text" @click.native="faultData.visible = false">
                                        <span style="color: #58595b;" class="cancel">取消</span></el-button>
                                    <el-button type="danger" size="mini" @click="deleteFault">
                                        确定</el-button>
                                </div>
                                <el-button type="text" slot="reference" icon="el-icon-delete" circle>
                                </el-button>
                            </el-popover>
                        </div>



                    </div>
                </el-dialog>
                <el-dialog title="模板信息" :visible.sync="temDialogTableVisible" @close="closeTemDialogTableVisible">

                    <el-table :data="temData">
                        <el-table-column label="模板名称" prop="temName" align="center"></el-table-column>
                        <el-table-column label="定值块名称" prop="sZoneName" align="center"></el-table-column>
                        <el-table-column label="定值字段名称" prop="fieldName" align="center"></el-table-column>
                        <el-table-column label="操作" align="center">
                            <!-- 删除 -->
                            <div slot-scope="scope">
                                <el-popover width="160" v-model="scope.row.visible">
                                    <p style="font-size: 15px;">确定删除吗？</p>
                                    <div style="text-align: right; margin: 0" style="font-size: 15px;">
                                        <el-button size="mini" type="text" @click.native="scope.row.visible = false">
                                            <span style="color: #58595b;" class="cancel">取消</span></el-button>
                                        <el-button type="danger" size="mini"
                                            @click="deleteField(scope.row,scope.$index)">
                                            确定</el-button>
                                    </div>
                                    <el-button type="text" slot="reference" icon="el-icon-delete" circle>
                                    </el-button>
                                </el-popover>
                            </div>
                        </el-table-column>
                    </el-table>
                    <!-- 新增 -->
                    <div v-if="temAddInfoShow" style="display: flex;justify-content: space-around; margin-top: 10px;">
                        <el-input v-model="temAddInfo.temName" placeholder="模板名称" v-if="!temInfoNotNull"></el-input>
                        <el-input v-model="temAddInfo.sZoneName" placeholder="定值块名称"></el-input>
                        <el-input v-model="temAddInfo.fieldName" placeholder="定值字段名称"></el-input>
                    </div>
                    <div style="display: flex;justify-content: center;">

                        <el-button type="primary" icon="el-icon-finished" size="small" style="margin-top: 10px;"
                            v-if="temAddInfoShow" @click="addField">提交</el-button>
                        <el-button type="text" icon="el-icon-close" size="small" style="margin-top: 10px;"
                            v-if="temAddInfoShow" @click="closeFieldAdd"><span style="color: #58595b;"
                                class="cancel">取消</span></el-button>
                        <el-button type="primary" icon="el-icon-plus" size="small" style="margin-top: 10px;"
                            v-if="!temAddInfoShow" @click="temAddInfoShow=true">Add</el-button>
                    </div>
                </el-dialog>




                <el-main v-if="faultManage">
                    <div style="display: flex;justify-content: space-between;height: 50px;margin-bottom: 20px;">
                        <p style="margin-top: 10px;">故障信息</p>
                        <el-button type="primary" icon="el-icon-refresh" id="import" @click.native="getFaultList">导入
                        </el-button>

                    </div>
                    <template id="resultTable">
                        <el-table :data="faultListData" style="width: 100%;" key="faultManage">
                            <el-table-column prop="id" label="设备ID" align="center">
                            </el-table-column>
                            <el-table-column prop="devId" label="设备编号" align="center">
                            </el-table-column>
                            <el-table-column prop="devName" label="设备名称" align="center">
                            </el-table-column>
                            <el-table-column prop="faultDesc" label="故障描述" align="center">
                                <div slot-scope="scope">
                                    <el-tooltip :content="scope.row.faultDesc" placement="top">
                                        <el-button size="mini" type="text">
                                            <span style="color: #58595b;" class="cancel">查看详情</span></el-button>
                                    </el-tooltip>
                                </div>
                            </el-table-column>
                            <el-table-column prop="location" label="地址描述" align="center">
                            </el-table-column>
                            <el-table-column prop="devFac" label="制造厂家" align="center">
                            </el-table-column>
                            <el-table-column prop="name" label="上传用户" align="center">
                            </el-table-column>
                            <el-table-column prop="upTime" label="上传时间" align="center">
                            </el-table-column>
                            <!-- <el-table-column align="center" width="200px" label="操作">
                                <div slot-scope="scope">
                                    
                                    <div v-if="!scope.row.edit">
                                        <el-button @click.native="scope.row.edit = true" type="text" slot="reference"
                                            icon="el-icon-edit" circle></el-button>
                                        <el-popover width="160" v-model="scope.row.visible">
                                            <p style="font-size: 15px;">确定删除吗？</p>
                                            <div style="text-align: right; margin: 0" style="font-size: 15px;">
                                                <el-button size="mini" type="text" @click="scope.row.visible = false">
                                                    <span style="color: #58595b;" class="cancel">取消</span></el-button>
                                                <el-button type="danger" size="mini"
                                                    @click="deleteFaultInList(scope.row,scope.$index)">确定</el-button>
                                            </div>
                                            <el-button type="text" slot="reference" icon="el-icon-delete" circle>
                                            </el-button>
                                        </el-popover>
                                    </div>
                                   
                                    <div v-if="scope.row.edit">
                                        <el-button @click.native="updateFaultInList(scope.row)" type="text"
                                            icon="el-icon-finished" circle></el-button>
                                        <el-button @click.native="scope.row.edit = false" type="text"
                                            icon="el-icon-close" circle></el-button>
                                    </div>
                                </div>
                            </el-table-column> -->


                        </el-table>
                    </template>

                    </table>

                </el-main>

                <el-main v-if="deadlineManage">

                    <div style="display: flex;justify-content: space-between;height: 50px;margin-bottom: 20px;">
                        <p style="margin-top: 10px;">临近到期设备信息</p>
                        <el-button type="primary" icon="el-icon-refresh" id="import" @click.native="getDeadlineDevice">
                            获取</el-button>

                    </div>
                    <template id="resultTable">
                        <el-table :data="deadlineDeviceData" style="width: 100%;" key="deadlineManage">
                            <el-table-column prop="id" label="设备ID" align="center">
                            </el-table-column>
                            <el-table-column prop="devId" label="设备编号" align="center">
                            </el-table-column>
                            <el-table-column prop="devName" label="设备名" align="center">
                            </el-table-column>
                            <el-table-column prop="rDevType" label="保护类型" align="center">
                            </el-table-column>
                            <el-table-column prop="proName" label="被保护设备" align="center">
                            </el-table-column>
                            <el-table-column prop="switchId" label="开关编号" align="center">
                            </el-table-column>
                            <el-table-column prop="devFac" label="制造厂家" align="center">
                            </el-table-column>
                            <el-table-column prop="deadline" label="使用期限" align="center">
                                <div slot-scope="{row}">
                                    <span style="color: red;" class="cancel">{{row.deadline}}</span>
                                </div>
                            </el-table-column>


                        </el-table>
                    </template>
                </el-main>
            </el-container>

        </el-container>

    </div>
    <script src="../JS/home.js"></script>
</body>

</html>